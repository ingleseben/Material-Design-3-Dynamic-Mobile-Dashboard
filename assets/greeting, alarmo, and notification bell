type: horizontal-stack
cards:
  - type: custom:streamline-card
    template: date_clock_text_card
    variables:
      - subtitle: "{{ now().strftime('%a %b %-d - %I:%M %p') }}"
  - type: custom:mushroom-chips-card
    chips:
      - type: conditional
        conditions:
          - entity: alarm_control_panel.alarmo
            state: triggered
        chip:
          type: template
          entity: alarm_control_panel.alarmo
          content: Triggered
          tap_action:
            action: navigate
            navigation_path: "#alarmo"
          icon: m3of:notifications-active
          icon_color: "#d14f3a"
      - type: conditional
        conditions:
          - entity: alarm_control_panel.alarmo
            state: armed_away
        chip:
          type: template
          entity: alarm_control_panel.alarmo
          content: Armed away
          tap_action:
            action: navigate
            navigation_path: "#alarmo"
          icon: mdi:shield-lock
          icon_color: "#69ac5a"
      - type: conditional
        conditions:
          - entity: alarm_control_panel.alarmo
            state: arming
        chip:
          type: template
          entity: alarm_control_panel.alarmo
          content: Arming
          tap_action:
            action: navigate
            navigation_path: "#alarmo"
          icon: mdi:shield
          icon_color: "#efa340"
      - type: conditional
        conditions:
          - entity: alarm_control_panel.alarmo
            state: pending
        chip:
          type: template
          entity: alarm_control_panel.alarmo
          content: Pending
          tap_action:
            action: navigate
            navigation_path: "#alarmo"
          icon: mdi:shield-outline
          icon_color: "#efa340"
      - type: conditional
        conditions:
          - entity: alarm_control_panel.alarmo
            state: disarmed
        chip:
          type: template
          entity: alarm_control_panel.alarmo
          tap_action:
            action: navigate
            navigation_path: "#alarmo"
          icon: mdi:shield-off
          icon_color: "#disarmed"
      - type: template
        entity: sensor.active_notification_count
        icon: m3of:notifications
        tap_action:
          action: navigate
          navigation_path: "#notifications"
        hold_action:
          action: none
        card_mod:
          style: >
            ha-card {
              position: relative;
            }


            {% set notifications = states('sensor.active_notification_count') |
            int %}

            {% if notifications > 0 %}

            ha-card:after {
              content: "{{ notifications }}";
              position: absolute;
              top: -3px;
              right: -3px;
              background-color: var(--md-sys-color-primary);
              color: var(--md-sys-color-on-primary);
              border-radius: 50%;
              width: 16px;
              height: 16px;
              font-size: 10px;
              line-height: 16px;
              text-align: center;
              display: inline-block;
              font-weight: bold;
            } {% endif %}
    alignment: end
    card_mod:
      style: |
        ha-card {
          margin-top: 1.2em
        }
